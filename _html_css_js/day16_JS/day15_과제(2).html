<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Set을 이용한 LOTTO 만들기</title>
</head>
<body>
    <h1>
        1 ~ 45 까지 중복되지 않게 숫자 6개를 랜덤으로 추출 > 출력
    </h1>
    
    <!-- 로또 번호 채우기 / 결과 function -->
    <button type="button" id="user">랜덤번호 6자리 생성</button>
    <h1 id="usernumprint">로또번호 출력</h1>
    <button type="button" id="com">당첨번호 7자리( + [보너스번호]) 생성</button>
    <h1 id="comnumprint">당첨번호 출력</h1>
    <button type="button" id="resultbtn">결과확인</button>
    <h1 id="result">결과확인</h1>
    <!-- (맞은 개수) 축 (등수)등 당첨 -->

    <span>==============================================</span><br><br>

    <button type="button" id="makeRandom">랜덤번호 6자리 생성</button>
    <h1 id="printNum">로또번호 출력</h1>
    <button type="button" id="makeRandom2">당첨번호 7자리( + [보너스번호]) 생성</button>
    <h1 id="printNum2">당첨번호 출력</h1>
    <button type="button" id="ranking()">결과확인</button>
    <h1 id="printResult">결과확인</h1>


    <script>

        // const userset = new Set();
        // const comset = new Set();
        // let cnt=0;

        // function rannum(){
        //     return Math.floor(Math.random()*45)+1;
        // }
                
        // // user 번호 생성
        // document.getElementById('user').addEventListener('click',()=>{
        //     userset.clear();
        //     let str = '';
        //     while(userset.size<6){
        //         userset.add(rannum());
        //         console.log(userset);
        //     }
        //     userset.forEach(function(value){
        //         console.log(value);
        //         str += `${value} `;
        //     })
        //     document.getElementById('usernumprint').innerHTML = str;
        // })
                
        // // com 번호 생성
        // document.getElementById('com').addEventListener('click',()=>{
        //     comset.clear();
        //     let str2 = '';
        //     while(comset.size<6){
        //         comset.add(rannum());
        //         console.log(comset);
        //     }
        //     comset.forEach(function(value){
        //         console.log(value);
        //         str2 += `${value} `;
        //     })
        //     let bonus = rannum();
        //     comset.add(bonus);
        //     str2 += `[${bonus}]`;
        //     document.getElementById('comnumprint').innerHTML = str2;
        // })

        // // 결과출력
        // document.getElementById('resultbtn').addEventListener('click',()=>{
        //     let str3='';
        //     userset.forEach(function(v){
        //         comset.forEach(function(k){
        //             if(v==k){
        //                 cnt++;
        //             }
        //         })
        //     })
        //     switch(cnt){
        //         case 2: str3 = `5등 당첨!`; break;
        //         case 3: str3 = `4등 당첨!`; break;
        //         case 4: str3 = `3등 당첨!`; break;
        //         case 5: str3 = `2등 당첨!`; break;
        //         case 6: str3 = `1등 당첨!`; break;
        //         case 7: str3 = `1등 당첨!`; break;
        //         default : str3 = `꽝!`; break;
        //     }
        //     document.getElementById('result').innerHTML = 
        //     `${str3} (맞은 개수 : ${cnt})`;
        // })

        // -------------------------------------------------------------------------------

        const lottoArr=[];              // 유저번호
        const lottoSet=new Set();
        const rNumArr=[];               // 당첨번호
        const rNumSet=new Set();

        let bonus=0;                    // 보너스번호 처리 변수



        document.getElementById('makeRandom').addEventListener('click',()=>{
            // set, map clear() : 비우기
            // array splice(index, count) : index부터 count까지 제거
            lottoArr.splice(0,6);   // 기존 배열 값 버리기
            lottoSet.clear();

            randomNum(lottoSet, lottoArr, 6);   // 랜덤 값 채우기
            console.log(lottoSet);
            console.log(lottoArr);

            document.getElementById('printNum').innerText = lottoArr;
        });

        document.getElementById('makeRandom2').addEventListener('click',()=>{
            rNumArr.splice(0,7);
            rNumSet.clear();

            randomNum(rNumSet, rNumArr, 7);
            console.log(rNumSet);
            console.log(rNumArr);

            bonus = rNumArr.pop();     // 마지막 요소를 제거 후 마지막 요소를 리턴

            document.getElementById('printNum2').innerText = rNumArr +"[" + bonus + "]";
        });


        function ranking(){
            let cnt=0;
            // for(const a of lottoArr){
            //     for(const b of rNumArr){
            //         if(a==b){
            //             cnt++;
            //         }
            //     }
            // }

            lottoArr.forEach(function(a){
                rNumArr.forEach(function(b){
                    if(a==b){
                        cnt++;
                    }
                })
            })
            console.log(cnt);

            let print = ``;
            switch(cnt){
                case 6 : print = `축! 1등 당첨!`; break;
                case 5 : 
                    // lottoArr에 보너스 값이 있는지 체크
                    // *includes() : 하나의 문자열에 다른 문자열이 있는지 확인 > true / false 리턴(for문-if문으로 체크하는 것과 유사)
                    lottoArr.includes(bonus) ? print =`축! 2등 당첨!` : print =`축! 3등 당첨!`;
                break;
                case 4 : print = `축! 3등 당첨!`; break;
                case 3 : print = `축! 4등 당첨!`; break;
                default : print = `꽝!`; break;
            };

            document.getElementById('printResult').innerText = print;
        }


        function randomNum(lottoSet, arr, num){        // num = 채울 개수
            while(lottoSet.size<num){
                let rNum=Math.floor(Math.random()*10)+1;
                lottoSet.add(rNum);
            }
            for(let num of lottoSet){
                arr.push(num);
            }
        }


        </script>

</body>
</html>